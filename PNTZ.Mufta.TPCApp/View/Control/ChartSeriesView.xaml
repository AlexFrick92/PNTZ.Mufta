<UserControl x:Class="PNTZ.Mufta.TPCApp.View.Control.ChartSeriesView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:PNTZ.Mufta.TPCApp.View.Control"
             xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/charts"
             
             
             xmlns:view="clr-namespace:PNTZ.Mufta.TPCApp.View"
             xmlns:fmtr="clr-namespace:PNTZ.Mufta.TPCApp.View.Formatter"
             
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/View/Styles/AppStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>



    <Border BorderThickness="0,0,1,1" BorderBrush="{StaticResource GridColor}">
        <Grid>
            <Grid.Resources>
                <Style TargetType="Label" x:Key="ChartHeader">
                    <Setter Property="Grid.Row" Value="0"/>
                    <Setter Property="BorderThickness" Value="0"/>
                    <Setter Property="HorizontalContentAlignment" Value="Center"/>
                    <Setter Property="VerticalContentAlignment" Value="Center"/>
                    <Setter Property="Margin" Value="0,10,0,-5"/>
                </Style>

                <Style TargetType="dxc:ChartControl" x:Key="ChartStyle">
                    <Setter Property="BorderThickness" Value="0"/>
                </Style>

                <Style TargetType="dxc:XYDiagram2D" x:Key="DiagramStyle">

                </Style>

                <Style TargetType="dxc:Pane" x:Key="PaneStyle">
                    <Setter Property="DomainBrush" Value="Transparent"/>
                </Style>

                <Style TargetType="dxc:AxisX2D" x:Key="AxisXStyle">
                    <Setter Property="GridLinesVisible" Value="True"/>
                    <Setter Property="GridLinesBrush" Value="#F0F0F0"/>
                </Style>

                <Style TargetType="dxc:AxisY2D" x:Key="AxisYStyle">
                    <Setter Property="GridLinesVisible" Value="True"/>
                    <Setter Property="GridLinesBrush" Value="#F0F0F0"/>
                    <Setter Property="Interlaced" Value="False"/>
                </Style>
            </Grid.Resources>

            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition/>
            </Grid.RowDefinitions>

            <Label 
                Style="{StaticResource ChartHeader}"                                    
                Content="{Binding Header, RelativeSource={RelativeSource AncestorType=UserControl}}" />

            <dxc:ChartControl Grid.Row="1" Style="{StaticResource ChartStyle}">
                <dxc:ChartControl.Diagram>
                    <dxc:XYDiagram2D Style="{StaticResource DiagramStyle}">

                        <dxc:XYDiagram2D.DefaultPane>
                            <dxc:Pane Style="{StaticResource PaneStyle}"/>
                        </dxc:XYDiagram2D.DefaultPane>

                        <dxc:XYDiagram2D.NavigationOptions>
                            <dxc:NavigationOptions/>
                        </dxc:XYDiagram2D.NavigationOptions>

                        <dxc:XYDiagram2D.AxisX>
                            <dxc:AxisX2D Style="{StaticResource AxisXStyle}">
                                <dxc:AxisX2D.WholeRange>
                                    <dxc:Range 
                                        MinValue="{Binding ChartConfig.XMinValue, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                                        MaxValue="{Binding ChartConfig.XMaxValue, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
                                </dxc:AxisX2D.WholeRange>
                                <dxc:AxisX2D.GridSpacing>
                                    <Binding Path="ChartConfig.XGridSpacing"
                                             RelativeSource="{RelativeSource AncestorType=UserControl}"/>
                                </dxc:AxisX2D.GridSpacing>
                                <dxc:AxisX2D.Label>
                                    <dxc:AxisLabel>
                                        <dxc:AxisLabel.Formatter>
                                            <fmtr:DefaultDoubleLabelFormatter/>
                                        </dxc:AxisLabel.Formatter>
                                    </dxc:AxisLabel>
                                </dxc:AxisX2D.Label>
                            </dxc:AxisX2D>
                        </dxc:XYDiagram2D.AxisX>

                        <dxc:XYDiagram2D.AxisY>
                            <dxc:AxisY2D Style="{StaticResource AxisYStyle}">
                                <dxc:AxisY2D.WholeRange>
                                    <dxc:Range 
                                        MinValue="{Binding ChartConfig.YMinValue, RelativeSource={RelativeSource AncestorType=UserControl}}" 
                                        MaxValue="{Binding ChartConfig.YMaxValue, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
                                </dxc:AxisY2D.WholeRange>
                                <dxc:AxisY2D.GridSpacing>
                                    <Binding Path="ChartConfig.YGridSpacing"
                                             RelativeSource="{RelativeSource AncestorType=UserControl}"/>
                                </dxc:AxisY2D.GridSpacing>
                                <dxc:AxisY2D.Label>
                                    <dxc:AxisLabel>
                                        <dxc:AxisLabel.Formatter>
                                            <fmtr:DefaultDoubleLabelFormatter/>
                                        </dxc:AxisLabel.Formatter>
                                    </dxc:AxisLabel>
                                </dxc:AxisY2D.Label>
                            </dxc:AxisY2D>
                        </dxc:XYDiagram2D.AxisY>

                        <dxc:LineSeries2D                
                            DataSource="{Binding Series, RelativeSource={RelativeSource AncestorType=UserControl}}"                                          
                            ArgumentDataMember="{Binding Argument, RelativeSource={RelativeSource AncestorType=UserControl}}"
                            ValueDataMember="{Binding Value, RelativeSource={RelativeSource AncestorType=UserControl}}"     
                            ArgumentScaleType="Numerical" />
                    </dxc:XYDiagram2D>
                </dxc:ChartControl.Diagram>
            </dxc:ChartControl>
        </Grid>
    </Border>
</UserControl>
