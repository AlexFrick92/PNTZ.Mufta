<UserControl x:Class="PNTZ.Mufta.TPCApp.View.Control.RealtimeChartView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             
             xmlns:local="clr-namespace:PNTZ.Mufta.TPCApp.View.Control"     
             
             xmlns:view="clr-namespace:PNTZ.Mufta.TPCApp.View"
             xmlns:fmtr="clr-namespace:PNTZ.Mufta.TPCApp.View.Formatter"
             
             xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/charts" 
             xmlns:core="http://schemas.devexpress.com/winfx/2008/xaml/core"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">


    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Styles/AppStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <Style TargetType="Label" x:Key="ChartHeader">
                <Setter Property="Grid.Row" Value="0"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="Margin" Value="0,10,0,-5"/>
            </Style>

            <Style TargetType="dxc:ChartControl" x:Key="ChartStyle">
                <Setter Property="BorderThickness" Value="0"/>
            </Style>

            <Style TargetType="dxc:XYDiagram2D" x:Key="DiagramStyle">

            </Style>

            <Style TargetType="dxc:Pane" x:Key="PaneStyle">
                <Setter Property="DomainBrush" Value="Transparent"/>
            </Style>

            <Style TargetType="dxc:AxisX2D" x:Key="AxisXStyle">
                <Setter Property="GridLinesVisible" Value="True"/>
                <Setter Property="GridLinesBrush" Value="#F0F0F0"/>
            </Style>

            <Style TargetType="dxc:AxisY2D" x:Key="AxisYStyle">
                <Setter Property="GridLinesVisible" Value="True"/>
                <Setter Property="GridLinesBrush" Value="#F0F0F0"/>
                <Setter Property="Interlaced" Value="False"/>
            </Style>


            <Style TargetType="dxc:ConstantLine" x:Key="LimitLineStyle">
                <Setter Property="Brush" Value="DarkRed"/>
            </Style>


            <Style TargetType="TextBlock" x:Key="LimitLineTextBoxStyle">
                <Setter Property="Foreground" Value="DarkRed"/>
                <Setter Property="FontSize" Value="12"/>
            </Style>

            <Style TargetType="Label" x:Key="LimitLineLabelStyle">
                <Setter Property="Foreground" Value="DarkRed"/>
                <Setter Property="FontSize" Value="12"/>
            </Style>

            <Style TargetType="dxc:ConstantLine" x:Key="OptimumLineStyle">
                <Setter Property="Brush" Value="OrangeRed"/>
            </Style>


            <Style TargetType="TextBlock" x:Key="OptimumTextBlockStyle">
                <Setter Property="Foreground" Value="OrangeRed"/>
                <Setter Property="FontSize" Value="12"/>
            </Style>

            <Style TargetType="Label" x:Key="OptimumLabelStyle">
                <Setter Property="Foreground" Value="OrangeRed"/>
                <Setter Property="FontSize" Value="12"/>
            </Style>

        </ResourceDictionary>
    </UserControl.Resources>


    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <Label 
            Style="{StaticResource ChartHeader}"                                    
            Content="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=ChartTitle}" />

        <dxc:ChartControl Grid.Row="1" Style="{StaticResource ChartStyle}"
                          CrosshairEnabled="True"    
                          core:ThemeManager.ThemeName="MetropolisLight"
                          >
            <dxc:ChartControl.CrosshairOptions>
                <dxc:CrosshairOptions ShowCrosshairLabels="False"
                              ShowValueLabels="True" 
                              ShowValueLine="True" 
                              ShowArgumentLabels="True" 
                              HighlightPoints="False"                              
                              ShowArgumentLine="True"/>
            </dxc:ChartControl.CrosshairOptions>

            <dxc:ChartControl.Diagram>
                <dxc:XYDiagram2D Style="{StaticResource DiagramStyle}"
                                EnableAxisXNavigation="True"
                                EnableAxisYNavigation="True"
                                x:Name="diagram">
                    <dxc:XYDiagram2D.NavigationOptions>
                        <dxc:NavigationOptions 
                            UseKeyboard="False"
                            UseScrollBars="True"
                            UseMouse="True"
                            UseTouchDevice="False"                                                        
                            />
                    </dxc:XYDiagram2D.NavigationOptions>
                    
                    <dxc:XYDiagram2D.DefaultPane>
                        <dxc:Pane Style="{StaticResource PaneStyle}">
                            <dxc:Pane.AxisXScrollBarOptions>
                                <dxc:ScrollBarOptions Visible="False"
                                                      BarThickness="10"                                                      
                                                      AnnotatedElements="None"
                                                      Alignment="Far"
                                                      />
                            </dxc:Pane.AxisXScrollBarOptions>
                            <dxc:Pane.AxisYScrollBarOptions>
                                <dxc:ScrollBarOptions Alignment="Far" 
                                      BarThickness="10"
                                      AnnotatedElements="None"                                                        
                                      Visible="False">
                          
                                </dxc:ScrollBarOptions>
                            </dxc:Pane.AxisYScrollBarOptions>
                        </dxc:Pane>
                    </dxc:XYDiagram2D.DefaultPane>

                    <dxc:XYDiagram2D.AxisX>
                        <dxc:AxisX2D Style="{StaticResource AxisXStyle}">

                            <dxc:AxisX2D.WholeRange>
                                <dxc:Range 
                                    MinValue="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=XMin}" 
                                    MaxValue="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=XMax}"
                                    SideMarginsValue="0"/>
                            </dxc:AxisX2D.WholeRange>

                            <dxc:AxisX2D.VisualRange>
                                <dxc:Range 
                                    MinValue="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=XMin}" 
                                    MaxValue="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=XMax}"
                                    SideMarginsValue="0"/>
                            </dxc:AxisX2D.VisualRange>

                            <!--<dxc:AxisX2D.GridSpacing>
                                <Binding RelativeSource="{RelativeSource AncestorType=UserControl}" Path="XGridSpacing"/>
                            </dxc:AxisX2D.GridSpacing>-->

                            <dxc:AxisX2D.CrosshairAxisLabelOptions>
                                <dxc:CrosshairAxisLabelOptions Pattern="{}{V:.#}" />
                            </dxc:AxisX2D.CrosshairAxisLabelOptions>

                            <dxc:AxisX2D.Label>
                                <dxc:AxisLabel>
                                    <dxc:AxisLabel.Formatter>
                                        <fmtr:DefaultDoubleLabelFormatter/>
                                    </dxc:AxisLabel.Formatter>
                                </dxc:AxisLabel>
                            </dxc:AxisX2D.Label>


                            <dxc:AxisX2D.ConstantLineBehindItemsSource>
                                <Binding RelativeSource="{RelativeSource AncestorType=UserControl}" Path="XConstantLines" />
                            </dxc:AxisX2D.ConstantLineBehindItemsSource>

                            <dxc:AxisX2D.ConstantLineBehindItemTemplate>
                                <DataTemplate>
                                    <dxc:ConstantLine 
                                            Value="{Binding Value}"                                             
                                            Style="{StaticResource LimitLineStyle}"
                                            Brush="{Binding Color}">
                                        <dxc:ConstantLine.Title>

                                            <dxc:ConstantLineTitle>
                                                <StackPanel Orientation="Horizontal">
                                                    <Label Style="{StaticResource LimitLineLabelStyle}" Foreground="{Binding Color}" Content="{Binding Label}" Margin="0,0,4,0"/>
                                                    <TextBlock Foreground="{Binding Color}" Style="{StaticResource LimitLineTextBoxStyle}" Text="{Binding Value, StringFormat={}{0:F2}}" VerticalAlignment="Center"/>
                                                </StackPanel>
                                            </dxc:ConstantLineTitle>
                                        </dxc:ConstantLine.Title>
                                    </dxc:ConstantLine>
                                </DataTemplate>
                            </dxc:AxisX2D.ConstantLineBehindItemTemplate>

                        </dxc:AxisX2D>

                    </dxc:XYDiagram2D.AxisX>

                    <dxc:XYDiagram2D.AxisY>
                        <dxc:AxisY2D Style="{StaticResource AxisYStyle}">

                            <dxc:AxisY2D.WholeRange>
                                <dxc:Range 
                                        MinValue="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=YMin}" 
                                        MaxValue="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=YMax}"
                                        SideMarginsValue="0"/>
                            </dxc:AxisY2D.WholeRange>

                            <dxc:AxisY2D.VisualRange>
                                <dxc:Range 
                                    MinValue="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=YMin}" 
                                    MaxValue="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=YMax}" 
                                    SideMarginsValue="0"/>
                            </dxc:AxisY2D.VisualRange>


                            <!--<dxc:AxisY2D.GridSpacing>
                                <Binding RelativeSource="{RelativeSource AncestorType=UserControl}" Path="YGridSpacing"/>
                            </dxc:AxisY2D.GridSpacing>-->

                            <dxc:AxisY2D.CrosshairAxisLabelOptions>
                                <dxc:CrosshairAxisLabelOptions Pattern="{}{V:.#}" />
                            </dxc:AxisY2D.CrosshairAxisLabelOptions>


                            <dxc:AxisY2D.Label>
                                <dxc:AxisLabel>
                                    <dxc:AxisLabel.Formatter>
                                        <fmtr:DefaultDoubleLabelFormatter/>
                                    </dxc:AxisLabel.Formatter>
                                </dxc:AxisLabel>
                            </dxc:AxisY2D.Label>

                            <dxc:AxisY2D.ConstantLineInFrontItemsSource >
                                <Binding RelativeSource="{RelativeSource AncestorType=UserControl}" Path="YConstantLines" />
                            </dxc:AxisY2D.ConstantLineInFrontItemsSource >

                            <dxc:AxisY2D.ConstantLineInFrontItemTemplate>
                                <DataTemplate>
                                    <dxc:ConstantLine 
                                        Value="{Binding Value}" 
                                        Style="{StaticResource LimitLineStyle}"
                                        Brush="{Binding Color}">
                                        <dxc:ConstantLine.Title>

                                            <dxc:ConstantLineTitle>
                                                <StackPanel Orientation="Horizontal">
                                                    <Label Foreground="{Binding Color}" Style="{StaticResource LimitLineLabelStyle}" Content="{Binding Label}" Margin="0,0,2,0"/>
                                                    <TextBlock Foreground="{Binding Color}" Style="{StaticResource LimitLineTextBoxStyle}" Text="{Binding Value, StringFormat={}{0:F0}}"  VerticalAlignment="Center"/>
                                                </StackPanel>
                                            </dxc:ConstantLineTitle>
                                        </dxc:ConstantLine.Title>
                                    </dxc:ConstantLine>
                                </DataTemplate>
                            </dxc:AxisY2D.ConstantLineInFrontItemTemplate>

                        </dxc:AxisY2D>
                    </dxc:XYDiagram2D.AxisY>

                    <dxc:AreaSeries2D                
                            DataSource="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=ChartData}"                                          
                            ArgumentDataMember="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=ArgumentMember}"
                            ValueDataMember="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=ValueMember}"     
                            ArgumentScaleType="Numerical"
                            CrosshairEnabled="True"                                                        
                            Transparency="1">

                        
                        
                        <dxc:AreaSeries2D.Border>
                            <dxc:SeriesBorder Brush="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=LineColor}">
                                <dxc:SeriesBorder.LineStyle>
                                    <dxc:LineStyle Thickness="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=LineThickness}"/>
                                </dxc:SeriesBorder.LineStyle>
                            </dxc:SeriesBorder>
                        </dxc:AreaSeries2D.Border>
                    </dxc:AreaSeries2D>

                </dxc:XYDiagram2D>
            </dxc:ChartControl.Diagram>
        </dxc:ChartControl>
    </Grid>
</UserControl>
