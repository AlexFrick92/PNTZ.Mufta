# Сведения о программе ПЛК400

Установка состоит из двух машин силовой навёртки, двух машин предварителной навёртки, и подачи муфт. 

Для каждой машины установлен свой АРМ. На АРМ выполняется программа. Для коммуникации между программой и ПЛК созданы блоки. Блоки названы и содержат похожий код для каждой из двух машин. Почему они не использовали один и тот же блок но с разными дб – не известно. Рассмотрим алгоритм на примере машины 1.

В программе встречаются следующие сокращения, или имена:
- TPC – (Torque Process Controller) Программное обеспечение установленное на АРМSPS – ПЛК 400
- SPS - ПЛК
- REZ – Рецепт (программа). Данные, необходимые для соединения (силовой навертки)
- MP – Machin Parameter. Конфигурация машины. Базовые настройки, неизменные во время работы 
- BA – Betriebsarten – Режим работы 
- kraftschrauber, CAM, MU – Makeup, Силовая навёртка
- vorschrauber, MVS - Преднавёртка 
- ML - Муфтовый лифт 
- MB – Смазка муфт

## Структура программы в контексте обмена данными

![-](OB1.drawio.svg)

### OB1
Вся программа находится в блоке OB1. Хотя в ПЛК есть и другие OB, Они используются для диагностики и не содержат вложенных блоков

### (1)FB_Komm

Общий блок коммуникаций для машины 1. Здесь собраны и вызываются все блоки коммуникаций между TPC, SPS И EASY. 

### FB710 : FB_TPC_REZ
Блок загрузки рецепта (задания) из TPC в ПЛК. Алгоритм загрузки рецепта состоит из нескольких шагов, каждый шаг подтверждается командой от TPC или ПЛК.

### FB711 : FB_TPC_MP
Блок коммуникаций для параметров машин. Параметры машин - это параметры настроки датчиков, энкодеров, тензометрии.
Параметры машин не загружаются из TPC в ПЛК. Параметры загружаются из панели оператора в ПЛК. Но чтобы ПЛК принял эти параметры, на TPC появляется окно, где оператор проверяет параметры и подтверждает загрузку. После подтверждения эти параметры сохраняются и на TPC. Зачем? Это нужно выяснить.

### FB720 : FB_Com_Kraft
Блок коммуникаций в процессе силового свинчивания. В самом блоке формируются команды, но условия для этих команд создаются снаружи блока, т.е. в блоке (1)FB_Komm.



## Задачи

- Состав рецепта (рабочих данных)
- Процедура загрузки рецепта в ПЛК
- Состав оперативных параметров
- Состав результата соединения
- Процедура получения результата соединения